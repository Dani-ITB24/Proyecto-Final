FROM ubuntu:latest

# Actualiza la lista de paquetes e instala los paquetes necesarios para Wireshark, Apache y SSH
RUN apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y \
    wireshark \
    apache2 \
    openssh-server \
    x11-utils \
    iproute2 \
    curl \
    wget \
    vim \
    nano \
    php \
    php-cli \
    php-fpm \
    john-data \
    && rm -rf /var/lib/apt/lists/*

# Configura el servidor SSH
RUN mkdir /var/run/sshd

# Descarga rockyou.txt
RUN wget https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwiwuOj4t-KEAxXlTaQEHc9zAaEQFnoECAYQAQ&url=https%3A%2F%2Fgithub.com%2Fbrannondorsey%2Fnaive-hashcat%2Freleases%2Fdownload%2Fdata%2Frockyou.txt&usg=AOvVaw3snAERl1mU6Ccr4WFEazBd&cshid=1709824335737456&opi=89978449

# Establece la variable de entorno DISPLAY para que apunte al servidor X del sistema anfitri√≥n
ENV DISPLAY=:0.0

# Expone los puertos 80 y 5000 para Apache y 22 para SSH
EXPOSE 80
EXPOSE 5000
EXPOSE 22

# Inicia el servicio de Apache y SSH al iniciar el contenedor
CMD service ssh start && apache2ctl -D FOREGROUND
